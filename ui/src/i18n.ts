export type Lang = "en" | "zh";

const STORAGE_KEY = "admin_lang";

const TRANSLATIONS: Record<Lang, Record<string, string>> = {
  en: {
    "app.title": "Admin Console",
    "app.subtitle": "v0 management surface",
    "app.token": "Token",
    "app.lang": "Language",
    "app.connected": "Connected to /v0",
    "nav.status": "Status",
    "nav.status.hint": "runtime and health",
    "nav.config": "Config",
    "nav.config.hint": "global config",
    "nav.catalog": "Catalog",
    "nav.catalog.hint": "aliases + defaults",
    "nav.models": "Models",
    "nav.models.hint": "model config",
    "nav.scripts": "Scripts",
    "nav.scripts.hint": "js scripts",
    "status.title": "Status",
    "status.desc": "Runtime overview and admin surface health.",
    "status.refresh": "Refresh",
    "status.reload": "Reload",
    "status.reloading": "Reloading...",
    "status.card.version": "Version",
    "status.card.uptime": "Uptime (sec)",
    "status.card.loaded": "Loaded at",
    "status.card.mtime": "Config mtime",
    "status.card.models": "Models",
    "status.card.aliases": "Aliases",
    "status.models": "Model IDs",
    "status.aliases": "Alias Names",
    "config.title": "Config",
    "config.desc": "Tune response settings.",
    "config.refresh": "Refresh",
    "config.save": "Save",
    "config.reasoning": "Reasoning Output",
    "config.reasoning.none": "None",
    "config.reasoning.prefix": "Prefix (<think>)",
    "config.reasoning.field": "Field (reasoning_content)",
    "config.include_usage": "Include usage",
    "config.schema_strict": "Schema strict",
    "catalog.title": "Catalog",
    "catalog.desc": "Default model, aliases, and templates.",
    "config.default_model": "Default model",
    "config.routing.desc": "Route aliases to providers with strategy and ordering.",
    "config.routing.add": "Add Alias",
    "config.routing.empty": "No aliases yet. Add one to start routing.",
    "config.routing.alias": "New alias",
    "config.routing.remove": "Remove",
    "config.routing.name": "Alias name",
    "config.routing.strategy": "Strategy",
    "config.routing.strategy.round_robin": "Round Robin",
    "config.routing.strategy.random": "Random",
    "config.routing.providers": "Providers",
    "config.routing.add_provider": "Add Provider",
    "models.title": "Models",
    "models.desc": "Edit model definitions in forms.",
    "models.refresh": "Refresh",
    "models.new": "New",
    "models.save": "Save",
    "models.export": "Export",
    "models.import": "Import",
    "models.mode.form": "Hide YAML",
    "models.mode.yaml": "YAML (backup)",
    "models.delete": "Delete",
    "models.list": "Available Models",
    "models.catalog.section": "Catalog",
    "models.catalog.desc": "Defaults, aliases, and templates for all models.",
    "models.catalog.default": "Default model",
    "models.catalog.owned_by": "Default owned_by",
    "models.catalog.static_stream": "Default static stream",
    "models.catalog.script_timeout": "Default script timeout (ms)",
    "models.catalog.script_stream": "Default script stream",
    "models.catalog.note": "Form covers catalog, aliases, and templates.",
    "models.aliases.section": "Aliases",
    "models.aliases.desc": "Route alias names to provider lists.",
    "models.aliases.empty": "No aliases yet.",
    "models.alias.add": "Add Alias",
    "models.alias.remove": "Remove",
    "models.alias.item": "Alias",
    "models.alias.name": "Alias name",
    "models.alias.strategy": "Strategy",
    "models.alias.strategy.round_robin": "Round Robin",
    "models.alias.strategy.random": "Random",
    "models.alias.providers": "Providers (one per line)",
    "models.alias.owned_by": "Alias Prefix (owned_by)",
    "models.alias.disabled": "Disable Alias",
    "models.templates.section": "Templates",
    "models.templates.desc": "Reusable overrides for models.",
    "models.templates.empty": "No templates yet.",
    "models.template.add": "Add Template",
    "models.template.remove": "Remove",
    "models.template.item": "Template",
    "models.template.name": "Template name",
    "models.template.kind": "Kind",
    "models.template.kind.any": "Any",
    "models.template.kind.static": "Static",
    "models.template.kind.script": "Script",
    "models.template.static.enable": "Enable static overrides",
    "models.template.script.enable": "Enable script overrides",
    "models.raw.title": "YAML Backup",
    "models.raw.save": "Save YAML",
    "models.raw.hint": "Use only when needed; saving YAML replaces the whole bundle.",
    "models.kind": "Kind",
    "models.extends": "Extends (one per line)",
    "models.meta.owned_by": "Owned By",
    "models.meta.created": "Created (unix)",
    "models.meta.description": "Description",
    "models.meta.tags": "Tags (one per line)",
    "models.section": "Model Details",
    "models.id": "Model ID",
    "models.disabled": "Disabled",
    "models.owned_by": "Owned By",
    "models.created": "Created (unix)",
    "models.type": "Type",
    "models.type.static": "Static",
    "models.type.script": "Script",
    "models.static.section": "Static Config",
    "models.static.pick": "Default Pick",
    "models.static.pick.default": "Use rule/default",
    "models.static.strategy": "Strategy",
    "models.static.strategy.round_robin": "Round Robin",
    "models.static.strategy.random": "Random",
    "models.static.strategy.match": "Match",
    "models.static.stream": "Stream Chunk Chars",
    "models.static.replies": "Replies",
    "models.static.add": "Add Reply",
    "models.pick.round_robin": "Round Robin",
    "models.pick.random": "Random",
    "models.pick.weighted": "Weighted",
    "models.rules": "Rules",
    "models.rules.empty": "No rules yet.",
    "models.rule.add": "Add Rule",
    "models.rule.default": "Default",
    "models.rule.make_default": "Make default",
    "models.rule.remove": "Remove",
    "models.rule.pick": "Pick Strategy",
    "models.rule.pick.default": "Inherit",
    "models.rule.when.any": "When (any)",
    "models.rule.when.all": "When (all)",
    "models.rule.when.none": "When (none)",
    "models.condition.add": "Add Condition",
    "models.condition.remove": "Remove",
    "models.condition.empty": "No conditions",
    "models.condition.type": "Type",
    "models.condition.case": "Case",
    "models.condition.case.sensitive": "Sensitive",
    "models.condition.case.insensitive": "Insensitive",
    "models.condition.value": "Value",
    "models.condition.type.contains": "Contains",
    "models.condition.type.equals": "Equals",
    "models.condition.type.starts_with": "Starts with",
    "models.condition.type.ends_with": "Ends with",
    "models.condition.type.regex": "Regex",
    "models.rule.replies": "Replies",
    "models.reply.add": "Add Reply",
    "models.reply": "Reply",
    "models.reply.content": "Content",
    "models.reply.reasoning": "Reasoning",
    "models.reply.weight": "Weight",
    "models.reply.match": "Match Type",
    "models.reply.match.none": "None",
    "models.reply.match.plain": "Contains",
    "models.reply.match.regex": "Regex",
    "models.reply.match.value": "Match Rules",
    "models.reply.remove": "Remove",
    "models.script.section": "Script Config",
    "models.script.file": "File",
    "models.script.init": "Init File",
    "models.script.timeout": "Timeout (ms)",
    "models.script.stream": "Stream Chunk Chars",
    "scripts.title": "Scripts",
    "scripts.desc": "Edit JS script handlers.",
    "scripts.refresh": "Refresh",
    "scripts.new": "New",
    "scripts.save": "Save",
    "scripts.delete": "Delete",
    "scripts.list": "Scripts",
    "scripts.name": "Script Name",
    "token.title": "Admin Token",
    "token.desc": "Provide admin bearer token for /v0 access. Leave empty if auth is disabled.",
    "token.show": "Show",
    "token.hide": "Hide",
    "token.continue": "Continue without token",
    "token.save": "Save token",
    "notice.token.saved": "Token saved",
    "notice.token.cleared": "Token cleared",
    "notice.token.skip": "Continuing without token",
    "notice.reloaded": "Reloaded",
    "notice.debounced": "Reload debounced",
    "error.load.status": "Failed to load status",
    "error.reload": "Reload failed",
    "error.load.config": "Failed to load config",
    "error.save": "Save failed",
    "error.rule.empty": "At least one rule is required",
    "error.rule.default": "Exactly one default rule is required",
    "error.rule.replies": "Each rule needs at least one reply",
    "error.rule.default.when": "Default rule cannot include conditions",
    "error.rule.when": "Non-default rule needs at least one condition",
    "error.export": "Export failed",
    "error.import": "Import failed",
    "notice.config.saved": "Config saved",
    "error.load.models": "Failed to load models",
    "error.load.model": "Failed to load model",
    "error.model.id": "Model id is required",
    "notice.model.saved": "Model saved",
    "notice.model.deleted": "Model deleted",
    "notice.catalog.saved": "Catalog saved",
    "error.delete": "Delete failed",
    "error.load.scripts": "Failed to load scripts",
    "error.load.script": "Failed to load script",
    "error.script.name": "Script name is required",
    "notice.script.saved": "Script saved",
    "notice.script.deleted": "Script deleted",
    "error.match.last": "Match strategy requires the last reply without match",
    "error.match.before": "Match strategy requires only last reply without match",
    "error.routing.alias.name": "Alias name is required",
    "error.routing.alias.providers": "Alias {name} needs at least one provider",
    "error.template.name": "Template name is required",
    "confirm.delete.model": "Delete model {id}?",
    "confirm.delete.script": "Delete script {name}?",
    "config.stream_first_delay": "Stream First Delay (ms)",
    "nav.interactive": "Interactive",
    "nav.interactive.hint": "live replies",
    "interactive.title": "Interactive",
    "interactive.desc": "Handle interactive requests in real time.",
    "interactive.refresh": "Refresh",
    "interactive.empty": "No pending requests.",
    "interactive.list": "Pending Requests",
    "interactive.request": "Request",
    "interactive.reply": "Reply",
    "interactive.reply.placeholder": "Type a reply...",
    "interactive.send": "Send Reply",
    "interactive.reasoning": "Reasoning (optional)",
    "interactive.finish_reason": "Finish reason (optional)",
    "notice.interactive.sent": "Reply sent",
    "error.interactive.load": "Failed to load interactive requests",
    "error.interactive.reply": "Reply failed",
    "error.interactive.empty": "Reply content is required",
    "error.interactive.fallback": "Interactive model needs fallback text",
    "models.type.interactive": "Interactive",
    "models.interactive.section": "Interactive Config",
    "models.interactive.timeout": "Timeout (ms)",
    "models.interactive.stream": "Stream Chunk Chars",
    "models.interactive.fake_reasoning": "Fake Reasoning",
    "models.interactive.fallback_text": "Fallback Text",
    "models.catalog.interactive_timeout": "Default interactive timeout (ms)",
    "models.catalog.interactive_stream": "Default interactive stream",
    "models.catalog.interactive_fake_reasoning": "Default fake reasoning",
    "models.catalog.interactive_fallback_text": "Default fallback text",
    "models.template.kind.interactive": "Interactive",
    "models.template.interactive.enable": "Enable interactive overrides",
    "app.logout": "Log out",
    "login.title": "Admin Access",
    "login.subtitle": "Enter the admin key to unlock the console.",
    "login.scope.title": "Scope",
    "login.scope.desc": "Controls the /v0 admin surface only.",
    "login.storage.title": "Storage",
    "login.storage.desc": "Key is saved locally in this browser.",
    "login.label": "Admin key",
    "login.placeholder": "sk-admin-xxx",
    "login.show": "Show",
    "login.hide": "Hide",
    "login.remember": "Stored locally in this browser",
    "login.cta": "Unlock Console",
    "login.signing": "Verifying...",
    "login.loading": "Loading",
    "login.checking": "Checking admin access",
    "login.retry": "Retry",
    "login.error.empty": "Enter the admin key",
    "login.error.invalid": "Admin key is invalid",
    "login.error.stale": "Saved key is no longer valid",
    "login.error.unreachable": "Unable to reach admin endpoint",
    "login.error.expired": "Session expired, please sign in again",
    "access.badge": "Public Notice",
    "access.title": "Open Access Statement",
    "access.subtitle": "Temporary relay · community-only",
    "access.lead":
      "This page is a disclosure notice only. It does not promise stability, performance, or availability.",
    "access.p1":
      "The endpoint behind this page is a lightweight relay for testing, demos, and quick validation. It may change or disappear without notice, and it does not provide any contractual guarantees.",
    "access.p2":
      "No SLA is offered, no uptime target is defined, and no response-time expectations should be assumed. If you depend on consistent throughput, you should not rely on this relay.",
    "access.p3":
      "The operator may apply limits, reset data, or disable access at any time for any reason, including but not limited to resource constraints, abuse prevention, or routine maintenance.",
    "access.p4":
      "This statement is intentionally verbose so that a casual reader understands the context: it is a best-effort convenience, not a product. Use it only when you can accept breakage.",
    "access.p5":
      "If you need compliance, monitoring, or support, you should seek a formal provider. This notice is informational and does not form a service contract.",
    "access.p6":
      "The key status below reflects the current backend configuration. It may change without notice and should be treated as transient.",
    "access.key.title": "Access Key Status",
    "access.key.enabled": "Backend requires a key: {key}",
    "access.key.disabled": "Backend does not require a key. Direct access is allowed.",
    "access.key.loading": "Loading backend settings…",
    "access.key.error": "Failed to read backend settings. Please retry later.",
    "access.footer":
      "Disclaimer: this notice is provided as-is. The operator accepts no liability for any loss, delay, or misuse."
  },
  zh: {
    "app.title": "管理控制台",
    "app.subtitle": "v0 管理面板",
    "app.token": "令牌",
    "app.lang": "语言",
    "app.connected": "已连接 /v0",
    "app.logout": "退出登录",
    "login.title": "管理登录",
    "login.subtitle": "输入管理密钥以进入控制台。",
    "login.scope.title": "范围",
    "login.scope.desc": "仅用于 /v0 管理接口访问。",
    "login.storage.title": "存储",
    "login.storage.desc": "密钥仅保存在本地浏览器。",
    "login.label": "管理密钥",
    "login.placeholder": "sk-admin-xxx",
    "login.show": "显示",
    "login.hide": "隐藏",
    "login.remember": "密钥仅保存在本地浏览器",
    "login.cta": "进入控制台",
    "login.signing": "验证中...",
    "login.loading": "加载中",
    "login.checking": "正在检测管理鉴权",
    "login.retry": "重试",
    "login.error.empty": "请输入管理密钥",
    "login.error.invalid": "管理密钥无效",
    "login.error.stale": "本地密钥已失效",
    "login.error.unreachable": "无法连接管理接口",
    "login.error.expired": "登录已过期，请重新登录",
    "nav.status": "状态",
    "nav.status.hint": "运行与健康",
    "nav.config": "配置",
    "nav.config.hint": "全局配置",
    "nav.catalog": "目录",
    "nav.catalog.hint": "别名 + 默认",
    "nav.models": "模型",
    "nav.models.hint": "模型配置",
    "nav.scripts": "脚本",
    "nav.scripts.hint": "JS 脚本",
    "status.title": "状态",
    "status.desc": "运行概览与管理面板健康检查。",
    "status.refresh": "刷新",
    "status.reload": "重载",
    "status.reloading": "重载中...",
    "status.card.version": "版本",
    "status.card.uptime": "运行时长(秒)",
    "status.card.loaded": "加载时间",
    "status.card.mtime": "配置更新时间",
    "status.card.models": "模型数",
    "status.card.aliases": "别名数",
    "status.models": "模型 ID",
    "status.aliases": "别名名称",
    "config.title": "配置",
    "config.desc": "配置响应输出策略。",
    "config.refresh": "刷新",
    "config.save": "保存",
    "config.reasoning": "推理输出",
    "config.reasoning.none": "不输出",
    "config.reasoning.prefix": "前缀 <think>",
    "config.reasoning.field": "字段 reasoning_content",
    "config.include_usage": "返回 usage",
    "config.schema_strict": "严格 schema",
    "catalog.title": "目录配置",
    "catalog.desc": "默认模型、别名与模板。",
    "config.default_model": "默认模型",
    "config.routing.desc": "为别名配置路由策略与提供方。",
    "config.routing.add": "新增别名",
    "config.routing.empty": "暂无别名，请先添加。",
    "config.routing.alias": "新别名",
    "config.routing.remove": "移除",
    "config.routing.name": "别名",
    "config.routing.strategy": "策略",
    "config.routing.strategy.round_robin": "轮询",
    "config.routing.strategy.random": "随机",
    "config.routing.providers": "提供方",
    "config.routing.add_provider": "添加提供方",
    "models.title": "模型",
    "models.desc": "模型详情表单编辑",
    "models.refresh": "刷新",
    "models.new": "新建",
    "models.save": "保存",
    "models.export": "导出",
    "models.import": "导入",
    "models.mode.form": "隐藏 YAML",
    "models.mode.yaml": "YAML 备份",
    "models.delete": "删除",
    "models.list": "模型列表",
    "models.catalog.section": "目录配置",
    "models.catalog.desc": "全局默认、别名与模板配置。",
    "models.catalog.default": "默认模型",
    "models.catalog.owned_by": "默认所属",
    "models.catalog.static_stream": "默认静态分片",
    "models.catalog.script_timeout": "默认脚本超时(ms)",
    "models.catalog.script_stream": "默认脚本分片",
    "models.catalog.note": "表单覆盖 catalog、aliases 与 templates。",
    "models.aliases.section": "别名",
    "models.aliases.desc": "将别名路由到提供方列表。",
    "models.aliases.empty": "暂无别名。",
    "models.alias.add": "新增别名",
    "models.alias.remove": "移除",
    "models.alias.item": "别名",
    "models.alias.name": "别名名称",
    "models.alias.strategy": "策略",
    "models.alias.strategy.round_robin": "轮询",
    "models.alias.strategy.random": "随机",
    "models.alias.providers": "提供方(每行一个)",
    "models.alias.owned_by": "别名前缀",
    "models.alias.disabled": "禁用别名",
    "models.templates.section": "模板",
    "models.templates.desc": "可复用的模型覆盖。",
    "models.templates.empty": "暂无模板。",
    "models.template.add": "新增模板",
    "models.template.remove": "移除",
    "models.template.item": "模板",
    "models.template.name": "模板名称",
    "models.template.kind": "类型",
    "models.template.kind.any": "任意",
    "models.template.kind.static": "静态",
    "models.template.kind.script": "脚本",
    "models.template.static.enable": "启用静态覆盖",
    "models.template.script.enable": "启用脚本覆盖",
    "models.raw.title": "YAML 备份",
    "models.raw.save": "保存 YAML",
    "models.raw.hint": "仅在需要时使用；保存 YAML 会覆盖整个包。",
    "models.kind": "类型",
    "models.extends": "继承模板(每行一个)",
    "models.meta.owned_by": "所属",
    "models.meta.created": "创建时间(unix)",
    "models.meta.description": "描述",
    "models.meta.tags": "标签(每行一个)",
    "models.section": "模型详情",
    "models.id": "模型 ID",
    "models.disabled": "已禁用",
    "models.owned_by": "所属",
    "models.created": "创建时间(unix)",
    "models.type": "类型",
    "models.type.static": "静态",
    "models.type.script": "脚本",
    "models.static.section": "静态配置",
    "models.static.pick": "默认选择策略",
    "models.static.pick.default": "使用规则默认",
    "models.static.strategy": "策略",
    "models.static.strategy.round_robin": "轮询",
    "models.static.strategy.random": "随机",
    "models.static.strategy.match": "匹配",
    "models.static.stream": "流式分片字符数",
    "models.static.replies": "回复列表",
    "models.static.add": "新增回复",
    "models.pick.round_robin": "轮询",
    "models.pick.random": "随机",
    "models.pick.weighted": "权重",
    "models.rules": "规则列表",
    "models.rules.empty": "暂无规则。",
    "models.rule.add": "新增规则",
    "models.rule.default": "默认",
    "models.rule.make_default": "设为默认",
    "models.rule.remove": "移除",
    "models.rule.pick": "选择策略",
    "models.rule.pick.default": "继承",
    "models.rule.when.any": "匹配(任一)",
    "models.rule.when.all": "匹配(全部)",
    "models.rule.when.none": "排除匹配",
    "models.condition.add": "新增条件",
    "models.condition.remove": "移除",
    "models.condition.empty": "暂无条件",
    "models.condition.type": "类型",
    "models.condition.case": "大小写",
    "models.condition.case.sensitive": "区分大小写",
    "models.condition.case.insensitive": "不区分大小写",
    "models.condition.value": "值",
    "models.condition.type.contains": "包含",
    "models.condition.type.equals": "等于",
    "models.condition.type.starts_with": "开头匹配",
    "models.condition.type.ends_with": "结尾匹配",
    "models.condition.type.regex": "正则",
    "models.rule.replies": "回复列表",
    "models.reply.add": "新增回复",
    "models.reply": "回复",
    "models.reply.content": "内容",
    "models.reply.reasoning": "推理",
    "models.reply.weight": "权重",
    "models.reply.match": "匹配类型",
    "models.reply.match.none": "无",
    "models.reply.match.plain": "包含",
    "models.reply.match.regex": "正则",
    "models.reply.match.value": "匹配规则",
    "models.reply.remove": "移除",
    "models.script.section": "脚本配置",
    "models.script.file": "脚本文件",
    "models.script.init": "初始化脚本",
    "models.script.timeout": "超时(ms)",
    "models.script.stream": "流式分片字符数",
    "scripts.title": "脚本",
    "scripts.desc": "编辑 JS 脚本处理器。",
    "scripts.refresh": "刷新",
    "scripts.new": "新建",
    "scripts.save": "保存",
    "scripts.delete": "删除",
    "scripts.list": "脚本列表",
    "scripts.name": "脚本名",
    "token.title": "管理令牌",
    "token.desc": "输入 /v0 管理接口的 Bearer Token。未启用鉴权时可留空。",
    "token.show": "显示",
    "token.hide": "隐藏",
    "token.continue": "无令牌继续",
    "token.save": "保存令牌",
    "notice.token.saved": "令牌已保存",
    "notice.token.cleared": "令牌已清除",
    "notice.token.skip": "已无令牌继续",
    "notice.reloaded": "已重载",
    "notice.debounced": "重载被防抖",
    "error.load.status": "状态加载失败",
    "error.reload": "重载失败",
    "error.load.config": "配置加载失败",
    "error.save": "保存失败",
    "error.rule.empty": "至少需要一条规则",
    "error.rule.default": "必须且只能有一条默认规则",
    "error.rule.replies": "每条规则至少需要一条回复",
    "error.rule.default.when": "默认规则不能包含匹配条件",
    "error.rule.when": "非默认规则至少需要一个匹配条件",
    "error.export": "导出失败",
    "error.import": "导入失败",
    "notice.config.saved": "配置已保存",
    "error.load.models": "模型列表加载失败",
    "error.load.model": "模型加载失败",
    "error.model.id": "需要填写模型 ID",
    "notice.model.saved": "模型已保存",
    "notice.model.deleted": "模型已删除",
    "notice.catalog.saved": "目录配置已保存",
    "error.delete": "删除失败",
    "error.load.scripts": "脚本列表加载失败",
    "error.load.script": "脚本加载失败",
    "error.script.name": "需要填写脚本名",
    "notice.script.saved": "脚本已保存",
    "notice.script.deleted": "脚本已删除",
    "error.match.last": "匹配策略要求最后一条回复不带 match",
    "error.match.before": "匹配策略要求只有最后一条回复可不带 match",
    "error.routing.alias.name": "别名不能为空",
    "error.routing.alias.providers": "别名 {name} 至少需要一个提供方",
    "error.template.name": "模板名称不能为空",
    "confirm.delete.model": "确认删除模型 {id}?",
    "confirm.delete.script": "确认删除脚本 {name}?",
    "config.stream_first_delay": "首字延迟(ms)",
    "nav.interactive": "交互",
    "nav.interactive.hint": "实时回复",
    "interactive.title": "交互",
    "interactive.desc": "实时处理交互请求。",
    "interactive.refresh": "刷新",
    "interactive.empty": "暂无待处理请求。",
    "interactive.list": "待处理请求",
    "interactive.request": "请求",
    "interactive.reply": "回复",
    "interactive.reply.placeholder": "请输入回复...",
    "interactive.send": "发送回复",
    "interactive.reasoning": "推理(可选)",
    "interactive.finish_reason": "结束原因(可选)",
    "notice.interactive.sent": "回复已发送",
    "error.interactive.load": "加载交互请求失败",
    "error.interactive.reply": "回复失败",
    "error.interactive.empty": "回复内容不能为空",
    "error.interactive.fallback": "交互模型必须提供回退文案",
    "models.type.interactive": "交互",
    "models.interactive.section": "交互配置",
    "models.interactive.timeout": "超时(ms)",
    "models.interactive.stream": "流式分片字符数",
    "models.interactive.fake_reasoning": "伪思维链",
    "models.interactive.fallback_text": "回退文案",
    "models.catalog.interactive_timeout": "默认交互超时(ms)",
    "models.catalog.interactive_stream": "默认交互分片",
    "models.catalog.interactive_fake_reasoning": "默认伪思维链",
    "models.catalog.interactive_fallback_text": "默认回退文案",
    "models.template.kind.interactive": "交互",
    "models.template.interactive.enable": "启用交互覆盖",
    "access.badge": "公开公告",
    "access.title": "开放访问说明",
    "access.subtitle": "临时转发 · 社区用途",
    "access.lead":
      "本页面仅用于告知当前访问形态，不构成任何承诺或服务条款。",
    "access.p1":
      "这是一个用于测试、演示与联调的轻量转发入口，仅保证“能用时可用”。它可能随时被调整、重置或关闭，且不会提前通知。",
    "access.p2":
      "我们不提供 SLA、不承诺可用性、不保证响应时延，也不对任何时效性场景负责。若你需要稳定吞吐或一致体验，请勿依赖该入口。",
    "access.p3":
      "出于资源限制、风控或维护需要，访问可能会被限流、暂停或回滚。任何变更均不需要对外说明。",
    "access.p4":
      "这段说明故意写得冗长，是为了让你反复确认：这不是产品，也不是商业服务，只是一个便捷通道。",
    "access.p5":
      "若你需要合规、监控、支持或稳定保障，请使用正式渠道。本说明仅为信息展示，并不构成服务协议。",
    "access.p6":
      "下方密钥信息来自后端配置，仅代表当前状态，可能随时变化，请勿做长期依赖。",
    "access.key.title": "调用密钥状态",
    "access.key.enabled": "当前后端已启用调用密钥：{key}",
    "access.key.disabled": "当前后端无需调用密钥，可直接访问。",
    "access.key.loading": "正在读取后端设置…",
    "access.key.error": "读取后端设置失败，请稍后重试。",
    "access.footer":
      "免责声明：本站点按现状提供，不对任何损失、延迟或误用承担责任。"

  }
};
function detectLang(): Lang {
  if (typeof navigator !== "undefined") {
    const lang = navigator.language.toLowerCase();
    if (lang.startsWith("zh")) {
      return "zh";
    }
  }
  return "en";
}

export function getInitialLang(): Lang {
  if (typeof localStorage === "undefined") {
    return detectLang();
  }
  const stored = localStorage.getItem(STORAGE_KEY);
  if (stored === "en" || stored === "zh") {
    return stored;
  }
  return detectLang();
}

export function saveLang(lang: Lang) {
  if (typeof localStorage !== "undefined") {
    localStorage.setItem(STORAGE_KEY, lang);
  }
}

export function createTranslator(lang: Lang) {
  return (key: string, vars?: Record<string, string | number>) => {
    const template = TRANSLATIONS[lang][key] ?? key;
    if (!vars) {
      return template;
    }
    return Object.keys(vars).reduce(
      (acc, k) => acc.replaceAll(`{${k}}`, String(vars[k])),
      template
    );
  };
}

